<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>API文档</title>
  <script src="./jquery-3.4.1.min.js"></script>
  <script src="./api.js"></script>
  <link rel="stylesheet" href="./index.css">
</head>
<body>
  <!-- head -->
  <header>
    <h3 class="title">武博会mp</h3>
  </header>

  <!-- main -->
  <main class="main row-between">
    <!-- left -->
    <div class="left-nav p20 bg-gary">
      <ul class="left-ul">
      </ul>
    </div>

    <!-- right-box -->
    <div class="right-box pt20 pb30">
      <div class="request-item">
        <h2 class="request-item_title bd-b pb30">我的</h2>
        <div class="request-name pt20 pb10">
          <span class="request-way">GET</span>
          金币充值
        </div>
        <div class="request-url bg-gary p10 r3 text-nm">
          {{url}}/user/order
        </div>

        <!-- Headers -->
        <div class="request-headers_title pt30 pb10">Headers</div>
        <div class="request-headers-content bg-gary ph10 text-nm r3">
          <div class="request-headers_item row pv10 bd-b">
            <p class="request-headers_item-left">Content-Type</p>
            <p class="request-headers_item-right pl10">application/json</p>
          </div>
          <div class="request-headers_item pv10 row bd-b">
            <p class="request-headers_item-left">session</p>
            <p class="request-headers_item-right pl10">wubohui:wx-mini:user:45b6e040c1314167a3d1fb1c31d475b7</p>
          </div>
          <div class="request-headers_item row pv10 bd-b">
            <p class="request-headers_item-left">X-Client-Token</p>
            <p class="request-headers_item-right pl10">wubohui:wx-mini:user</p>
          </div>
        </div>

        <!-- Body -->
        <div class="request-body-box">
          <div class="request-body_title pt30 pb10">Body</div>
          <div class="request-body_content bg-gary p10 text-nm r3">
            {
              "platform":"wechatmp",
              "amount":100
            }
          </div>
        </div>
        

        <!-- params -->
        <div class="request-params-box">
          <div class="request-params_title pt30 pb10">Params</div>
          <div class="request-params-content bg-gary ph10 text-nm r3">
            <div class="request-params_item row pv10 bd-b">
              <p class="request-params_item-left">Content-Type</p>
              <p class="request-params_item-right pl10">application/json</p>
            </div>
            <div class="request-params_item pv10 row bd-b">
              <p class="request-params_item-left">session</p>
              <p class="request-params_item-right pl10">wubohui:wx-mini:user:45b6e040c1314167a3d1fb1c31d475b7</p>
            </div>
            <div class="request-params_item row pv10 bd-b">
              <p class="request-params_item-left">X-Client-Token</p>
              <p class="request-params_item-right pl10">wubohui:wx-mini:user</p>
            </div>
          </div>
        </div>

        <!-- Response -->
        <div class="response-box">
          <div class="response-title pt30 pb10">Response</div>
          <div class="response-content color-response bg-dark p10 text-nm r3">
            {
              "status": 0,
              "msg": "成功",
              "data": {
                "phonenum": "18911195538",
                "nickname": "小明",
                "avatarPath": "http://这里是默认头像的地址",
                "session": "asdjifj1i23j4ijqdiuf"
              }
            }
          </div>
        </div>
      </div>
    </div>
  </main>


  <!--  -->
  <script>
    $(function(){
      // 页面数据
      const data = api;
      const $LeftUl = $('.left-ul');
      
      // 大标题展示
      $('.title').html(data.info.name);

      // 侧边导航渲染
      $.each(data.item, function(keyFirst, value) {
        // 一级导航
        const $FirstLi = $(`
        <li class="nav-item color-primary">
          <div class="top row align-center pv5">
            <img class="pull" src="./images/pull.png">
            <div class="nav-title">${value.name}</div>
          </div>
        </li>
        `);
        $LeftUl.append($FirstLi);
        
        // 二级目录
        $.each(value.item, function(keySecond, value) {
          const $SecondUl = $(`
          <ul class="nav-content hidden">
            <li class="nav-content_item row">
              <p class="way">${value.request.method}</p>
              <p class="nav-content_item-name pl10">${value.name}</p>
            </li>
          </ul>
          `);
          $FirstLi.append($SecondUl);
          changeColor(keyFirst, keySecond, value.request.method);
        });
      });

      // 右侧内容


      // 导航下拉和收起事件
      // TODO: 待优化
      $('.top').click(function(){
        const $This = $(this);
        const $NavContent = $This.siblings('.nav-content');
        if ($NavContent.hasClass('hidden')) {
          $NavContent.removeClass('hidden');
          $This
            .find('.pull')
            .attr('src', './images/down.png')
            .end()
            .find('.nav-title')
            .addClass('color-post text-nm');
          return;
        }
        $NavContent.addClass('hidden');
        $This
            .find('.pull')
            .attr('src', './images/pull.png')
            .end()
            .find('.nav-title')
            .removeClass('color-post text-nm');
      });
      
      // 根据请求方法改变颜色
      function changeColor(keyFirst, keySecond, method){
        switch (method) {
          case 'GET':
            $('.nav-item')
              .eq(keyFirst)
              .find('.nav-content_item')
              .eq(keySecond)
              .find('.way')
              .addClass('color-get');
            break;
          case 'POST':
            $('.nav-item')
              .eq(keyFirst)
              .find('.nav-content_item')
              .eq(keySecond)
              .find('.way')
              .addClass('color-post');
            break;
          default:
            $('.nav-item')
              .eq(keyFirst)
              .find('.nav-content_item')
              .eq(keySecond)
              .find('.way')
              .addClass('color-put');
        }
      };


    });


  </script>
</body>
</html>